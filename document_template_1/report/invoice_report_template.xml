<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="invoice_report_document_extended_1" inherit_id="account.report_invoice_document">
        <xpath expr="//h2" position="inside">
            <t t-if="o.partner_id.lang == 'pl_PL'">
                <span t-if="o.move_type in ['in_refund', 'out_refund']">For Invoice No</span>
                <span t-if="o.move_type in ['in_refund', 'out_refund']" t-field="o.reversed_entry_id.name"/>
                <span t-if="o.move_type in ['in_refund', 'out_refund'] and o.reversed_entry_id.invoice_date">from</span>
                <span t-if="o.move_type in ['in_refund', 'out_refund']" t-field="o.reversed_entry_id.invoice_date"/>
            </t>
        </xpath>

        <xpath expr="//div[hasclass('row', 'mt32', 'mb32')]" position="attributes">
            <attribute name="t-if">o.partner_id.lang != 'pl_PL'</attribute>
        </xpath>

        <xpath expr="//t" position="replace">
            <t t-name="account.report_invoice_document">
                <t t-call="web.external_layout">
                    <t t-set="o" t-value="o.with_context({'lang': lang})"/>
                    <div class="row">
                        <div class="col-5" name="company_address" style="border-top: solid black">
                            <p>
                                <strong style="color: black">Seller</strong>
                            </p>
                            <span t-field="o.company_id"/>
                            <br/>
                            <span t-field="o.company_id.street"/>
                            <br/>
                            <span t-field="o.company_id.zip"/>
                            <span t-field="o.company_id.city"/>
                            <br/>
                            <span t-field="o.company_id.country_id"/>
                            <br/>
                            TIN:
                            <span t-field="o.company_id.vat"/>
                            <t t-if="o.partner_bank_id">
                                <br/>
                                <span t-field="o.partner_bank_id.bank_id.name"/>:
                                <br/>
                                <span t-field="o.partner_bank_id.acc_number"/>
                                <br/>
                                SWIFT:
                                <span t-field="o.partner_bank_id.bank_id.bic"/>
                            </t>
                        </div>

                        <div name="invoice_address" class="col-5 offset-2" style="border-top: solid black">
                            <p>
                                <strong style="color: black">Client</strong>
                            </p>
                            <address style="margin-bottom: 0" t-field="o.partner_id"
                                     t-options="{'widget': 'contact',
                                     'fields': ['address', 'name'], 'no_marker': True}"/>
                            TIN:
                            <span t-field="o.partner_id.vat"/>
                        </div>
                    </div>

                    <div class="page">
                        <br/>
                        <h2 style="text-align: center; color: black; margin-top: 0">
                            <span t-if="o.move_type == 'out_invoice' and (o.state == 'posted')">
                                <t t-if="o.is_downpayment">
                                    Down payment invoice
                                </t>
                                <t t-else="not o.is_downpayment">
                                    Invoice
                                </t>
                            </span>
                            <span t-if="o.move_type == 'out_invoice' and o.state == 'draft'">Draft Invoice</span>
                            <span t-if="o.move_type == 'out_invoice' and o.state == 'cancel'">Cancelled Invoice</span>
                            <span t-if="o.move_type == 'out_refund'">Credit Note</span>
                            <span t-if="o.move_type == 'in_refund'">Vendor Credit Note</span>
                            <span t-if="o.move_type == 'in_invoice'">Vendor Bill</span>
                            <span t-field="o.name"/>
                        </h2>

                        <div class="row mt32 mb32">
                            <div class="col-auto" t-if="o.name" name="description">
                                <strong>Description:</strong>
                                <p t-field="o.name"/>
                            </div>
                            <div class="col-auto" t-if="o.invoice_date" name="invoice_date">
                                <strong>Invoice Date:</strong>
                                <p t-field="o.invoice_date" t-options="{'widget': 'date'}"/>
                            </div>
                            <!-- SHOW SALE DATE ONLY FOR FINAL INVOICES -->
                            <div class="col-auto" name="sale_date"
                                 t-if="not o.is_downpayment and o.main_so_id.date_order
                                 and o.move_type in ('in_refund', 'out_refund', 'out_invoice')
                                 and o.state in ('posted', 'in_payment', 'paid')">
                                <strong>Sale Date:</strong>
                                <!-- ON FINAL INVOICES SALE DATE SHOULD BE THE SAME AS INVOICE DATE -->
                                <p t-field="o.invoice_date" t-options="{'widget': 'date'}"/>
                            </div>
                            <div class="col-auto" name="invoice_date_due"
                                 t-if="o.invoice_date_due and o.move_type == 'out_invoice' and o.state in ('posted', 'in_payment', 'paid')">
                                <strong>Due Date:</strong>
                                <p t-field="o.invoice_date_due" t-options="{'widget': 'date'}"/>
                            </div>
                            <div class="col-auto" t-if="o.invoice_origin" name="invoice_origin">
                                <strong>Source:</strong>
                                <p t-field="o.invoice_origin"/>
                            </div>
                            <div class="col-auto" t-if="o.partner_id.ref" name="customer_code">
                                <strong>Customer Code:</strong>
                                <p t-field="o.partner_id.ref"/>
                            </div>
                            <div name="ref" class="col-auto" t-if="o.correction_ref">
                                <strong>Reference:</strong>
                                <p t-field="o.correction_ref"/>
                            </div>
                            <div class="col-auto" name="reason"
                                 t-if="o.move_type in ('in_refund', 'out_refund')">
                                <strong>Correction<br/>Reason:
                                </strong>
                                <p t-field="o.correction_reason"/>
                            </div>
                        </div>
                        <br/>

                        <t t-set="display_discount" t-value="any([l.discount for l in o.invoice_line_ids])"/>
                        <t t-if="not o.reversed_entry_id">
                            <table class="table table-sm" name="invoice_line_table" style="font-size: 12px">
                                <thead>
                                    <tr>
                                        <t t-set="colspan" t-value="9"/>
                                        <td class="col-xs-1">
                                            <strong>No.</strong>
                                        </td>
                                        <td class="col-xs-3">
                                            <strong>Description</strong>
                                        </td>
                                        <td class="col-xs-1 text-right">
                                            <strong>PKWiU No.</strong>
                                        </td>
                                        <td class="col-xs-1 text-right">
                                            <strong>Quantity</strong>
                                        </td>
                                        <td class="col-xs-2 text-right">
                                            <strong>Unit Price</strong>
                                        </td>
                                        <td t-if="display_discount" class="col-xs-2 text-right">
                                            <strong>Disc.(%)</strong>
                                            <t t-set="colspan" t-value="colspan+1"/>
                                        </td>
                                        <td class="col-xs-1 text-right">
                                            <strong>VAT [%]</strong>
                                        </td>
                                        <td class="col-xs-2 text-right">
                                            <strong>Amount</strong>
                                        </td>
                                        <td class="col-xs-1 text-right oe_fixed_width">
                                            <strong>Tax</strong>
                                        </td>
                                        <td class="col-xs-2 text-right">
                                            <strong>Total Price</strong>
                                        </td>
                                    </tr>
                                </thead>

                                <tbody class="invoice_tbody">
                                    <t t-set="current_subtotal" t-value="0"/>
                                    <t t-set="i" t-value="1"/>
                                    <t t-foreach="o.invoice_line_ids" t-as="line">
                                        <t t-set="current_subtotal" t-value="current_subtotal + line.price_subtotal"
                                           groups="account.group_show_line_subtotals_tax_excluded"/>
                                        <t t-set="current_subtotal" t-value="current_subtotal + line.price_total"
                                           groups="account.group_show_line_subtotals_tax_included"/>
                                        <tr style="page-break-inside: avoid !important"
                                            t-att-class="'bg-200 font-weight-bold o_line_section'
                                            if line.display_type == 'line_section' else 'font-italic o_line_note'
                                            if line.display_type == 'line_note' else ''">
                                            <t t-if="not line.display_type" name="account_invoice_line_accountable">
                                                <td>
                                                    <span t-esc="i"/>
                                                </td>
                                                <t t-set="i" t-value="i+1"/>
                                                <td name="account_invoice_line_name">
                                                    <span t-field="line.name"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="line.product_id.pkwiu"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="line.quantity"/>
                                                    <span t-field="line.product_uom_id" groups="uom.group_uom"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="line.price_unit"
                                                          t-options="{'widget': 'monetary',
                                                          'display_currency': o.currency_id}"/>
                                                </td>
                                                <td t-if="display_discount" class="text-right">
                                                    <span t-field="line.discount"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-esc="', '.join(map(lambda x:
                                                    (x.description or x.name), line.tax_ids))"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-esc="line.price_subtotal"
                                                          t-options="{'widget': 'monetary',
                                                          'display_currency': o.currency_id}"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-esc="line.invoice_line_tax"
                                                          t-options="{'widget': 'monetary',
                                                          'display_currency': o.currency_id}"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-esc="line.price_total"
                                                          t-options="{'widget': 'monetary',
                                                          'display_currency': o.currency_id}"/>
                                                </td>
                                            </t>
                                            <t t-if="line.display_type == 'line_section'">
                                                <td colspan="99">
                                                    <span t-field="line.name"/>
                                                </td>
<!--                                                <t t-set="current_section" t-value="line"/>-->
                                                <t t-set="current_subtotal" t-value="0"/>
                                            </t>
                                            <t t-if="line.display_type == 'line_note'">
                                                <td colspan="99">
                                                    <span t-field="line.name"/>
                                                </td>
                                            </t>
                                        </tr>

<!--                                        <t t-if="current_section and (line_last or-->
<!--                                        o.invoice_line_ids[line_index+1].display_type == 'line_section')">-->

                                        <t t-if="line_last or
                                        o.invoice_line_ids[line_index+1].display_type == 'line_section'">
                                            <tr class="is-subtotal text-right">
                                                <td colspan="99">
                                                    <strong class="mr16">Subtotal</strong>
                                                    <span t-esc="current_subtotal"
                                                          t-options="{'widget': 'monetary',
                                                          'display_currency': o.currency_id}"/>
                                                </td>
                                            </tr>
                                        </t>
                                    </t>
                                </tbody>
                            </table>

                            <div class="clearfix">
                                <div id="total" class="row">
                                    <div t-attf-class="#{'col-4' if report_type != 'html'
                                    else 'col-sm-7 col-md-5'} ml-auto">
                                        <table class="table table-sm" style="font-size: 12px">
                                            <tr class="border-black" style="border-bottom:1px solid #dddddd">
                                                <td>
                                                    <strong>Subtotal</strong>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="o.amount_untaxed"/>
                                                </td>
                                            </tr>
                                            <tr style="border-bottom:1px solid #dddddd">
                                                <td>
                                                    <strong>Taxes</strong>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="o.amount_tax"/>
                                                </td>
                                            </tr>
                                            <tr class="border-black">
                                                <td>
                                                    <strong>Total</strong>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="o.amount_total"/>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <br/>
                        </t>

                        <t t-else="o.reversed_entry_id">
                            <t t-set="foreign_cur" t-value="False"/>
                            <strong>Before refund</strong>
                            <table class="table table-sm" style="font-size: 12px">
                                <thead>
                                    <tr>
                                        <t t-set="colspan" t-value="9"/>
                                        <td class="col-xs-1">
                                            <strong>No.</strong>
                                        </td>
                                        <td class="col-xs-3">
                                            <strong>Description</strong>
                                        </td>
                                        <td class="col-xs-1 text-right">
                                            <strong>PKWiU No.</strong>
                                        </td>
                                        <td class="col-xs-1 text-right">
                                            <strong>Quantity</strong>
                                        </td>
                                        <td class="col-xs-2 text-right">
                                            <strong>Unit Price</strong>
                                        </td>
                                        <td t-if="display_discount" class="col-xs-2 text-right">
                                            <strong>Disc.(%)</strong>
                                            <t t-set="colspan" t-value="colspan+1"/>
                                        </td>
                                        <td class="col-xs-1 text-right">
                                            <strong>VAT [%]</strong>
                                        </td>
                                        <td class="col-xs-2 text-right">
                                            <strong>Amount</strong>
                                        </td>
                                        <td class="col-xs-1 text-right oe_fixed_width">
                                            <strong>Tax</strong>
                                        </td>
                                        <td class="col-xs-2 text-right">
                                            <strong>Total Price</strong>
                                        </td>
                                    </tr>
                                </thead>

                                <tbody class="invoice_tbody">
                                    <t t-set="current_subtotal" t-value="0"/>
                                    <t t-set="i" t-value="1"/>
                                    <t t-foreach="o.reversed_entry_id.invoice_line_ids" t-as="line_orig">
                                        <t t-set="current_subtotal"
                                           t-value="current_subtotal + line_orig.price_subtotal"
                                           groups="account.group_show_line_subtotals_tax_excluded"/>
                                        <t t-set="current_subtotal" t-value="current_subtotal + line_orig.price_total"
                                           groups="account.group_show_line_subtotals_tax_included"/>
                                        <tr style="page-break-inside: avoid !important"
                                            t-att-class="'bg-200 font-weight-bold o_line_section'
                                            if line_orig.display_type == 'line_section' else 'font-italic o_line_note'
                                            if line_orig.display_type == 'line_note' else ''">
                                            <t t-if="not line_orig.display_type"
                                               name="account_invoice_line_accountable">
                                                <td>
                                                    <span t-esc="i"/>
                                                </td>
                                                <t t-set="i" t-value="i+1"/>
                                                <td name="account_invoice_line_name">
                                                    <span t-field="line_orig.name"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="line_orig.product_id.pkwiu"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="line_orig.quantity"/>
                                                    <span t-field="l.product_uom_id" groups="uom.group_uom"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="line_orig.price_unit"
                                                          t-options='{"widget": "monetary",
                                                          "display_currency": o.reversed_entry_id.currency_id}'/>
                                                </td>
                                                <td t-if="display_discount" class="text-right">
                                                    <span t-field="line_orig.discount"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-esc="', '.join(map(lambda x:
                                                    (x.description or x.name), line_orig.tax_ids))"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-esc="line_orig.price_subtotal"
                                                          t-options='{"widget": "monetary",
                                                          "display_currency": o.reversed_entry_id.currency_id}'/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-esc="line_orig.invoice_line_tax"
                                                          t-options='{"widget": "monetary",
                                                          "display_currency": o.reversed_entry_id.currency_id}'/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-esc="line_orig.price_total"
                                                          t-options='{"widget": "monetary",
                                                          "display_currency": o.reversed_entry_id.currency_id}'/>
                                                </td>
                                            </t>
                                            <t t-if="line_orig.display_type == 'line_section'">
                                                <td colspan="99">
                                                    <span t-field="line_orig.name"/>
                                                </td>
<!--                                                <t t-set="current_section" t-value="line"/>-->
                                                <t t-set="current_subtotal" t-value="0"/>
                                            </t>
                                            <t t-if="line_orig.display_type == 'line_note'">
                                                <td colspan="99">
                                                    <span t-field="line_orig.name"/>
                                                </td>
                                            </t>
                                        </tr>

<!--                                        <t t-if="current_section and (line_last or-->
<!--                                        o.invoice_line_ids[line_index+1].display_type == 'line_section')">-->

                                        <t t-if="line_last or
                                        o.invoice_line_ids[line_index+1].display_type == 'line_section'">
                                            <tr class="is-subtotal text-right">
                                                <td colspan="99">
                                                    <strong class="mr16">Subtotal</strong>
                                                    <span t-esc="current_subtotal"
                                                          t-options="{'widget': 'monetary',
                                                          'display_currency': o.currency_id}"/>
                                                </td>
                                            </tr>
                                        </t>
                                    </t>
                                </tbody>
                            </table>
                            <br/>
                            <p style="page-break-after: always"/>

                            <strong>After refund</strong>
                            <table class="table table-sm" style="font-size: 12px">
                                <thead>
                                    <tr>
                                        <t t-set="colspan" t-value="9"/>
                                        <td class="col-xs-1">
                                            <strong>No.</strong>
                                        </td>
                                        <td class="col-xs-3">
                                            <strong>Description</strong>
                                        </td>
                                        <td class="col-xs-1 text-right">
                                            <strong>PKWiU No.</strong>
                                        </td>
                                        <td class="col-xs-1 text-right">
                                            <strong>Quantity</strong>
                                        </td>
                                        <td class="col-xs-2 text-right">
                                            <strong>Unit Price</strong>
                                        </td>
                                        <td t-if="display_discount" class="col-xs-2 text-right">
                                            <strong>Disc.(%)</strong>
                                            <t t-set="colspan" t-value="colspan+1"/>
                                        </td>
                                        <td class="col-xs-1 text-right">
                                            <strong>VAT [%]</strong>
                                        </td>
                                        <td class="col-xs-2 text-right">
                                            <strong>Amount</strong>
                                        </td>
                                        <td class="col-xs-1 text-right oe_fixed_width">
                                            <strong>Tax</strong>
                                        </td>
                                        <td class="col-xs-2 text-right">
                                            <strong>Total Price</strong>
                                        </td>
                                    </tr>
                                </thead>

                                <tbody class="invoice_tbody">
                                    <t t-set="current_subtotal" t-value="0"/>
                                    <t t-set="i" t-value="1"/>
                                    <t t-foreach="o.correction_invoice_line_ids" t-as="l">
                                        <t t-set="current_subtotal" t-value="current_subtotal + l.price_subtotal"
                                           groups="account.group_show_line_subtotals_tax_excluded"/>
                                        <t t-set="current_subtotal" t-value="current_subtotal + l.invoice_line_gross"
                                           groups="account.group_show_line_subtotals_tax_included"/>
                                        <tr style="page-break-inside: avoid !important"
                                            t-att-class="'bg-200 font-weight-bold o_line_section'
                                            if l.display_type == 'line_section' else
                                            'font-italic o_line_note' if l.display_type == 'line_note'
                                            else ''">
                                            <t t-if="not l.display_type"
                                               name="account_invoice_line_accountable">
                                                <td>
                                                    <span t-esc="i"/>
                                                </td>
                                                <t t-set="i" t-value="i+1"/>
                                                <td name="account_invoice_line_name">
                                                    <span t-field="l.name"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="l.product_id.pkwiu"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="l.quantity"/>
                                                    <span t-esc="l.product_uom_id.name" groups="uom.group_uom"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="l.price_unit"
                                                          t-options='{"widget": "monetary",
                                                          "display_currency": o.currency_id}'/>
                                                </td>
                                                <td t-if="display_discount" class="text-right">
                                                    <span t-field="l.discount"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-esc="', '.join(map(lambda x:
                                                    (x.description or x.name), l.invoice_line_tax_ids))"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-esc="l.price_subtotal"
                                                          t-options='{"widget": "monetary",
                                                          "display_currency": o.reversed_entry_id.currency_id}'/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-esc="l.invoice_line_tax"
                                                          t-options='{"widget": "monetary",
                                                          "display_currency": o.currency_id}'/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-esc="l.invoice_line_gross"
                                                          t-options='{"widget": "monetary",
                                                          "display_currency": o.currency_id}'/>
                                                </td>
                                            </t>
                                            <t t-if="l.display_type == 'line_section'">
                                                <td colspan="99">
                                                    <span t-field="l.name"/>
                                                </td>
<!--                                                <t t-set="current_section" t-value="line"/>-->
                                                <t t-set="current_subtotal" t-value="0"/>
                                            </t>
                                            <t t-if="l.display_type == 'line_note'">
                                                <td colspan="99">
                                                    <span t-field="l.name"/>
                                                </td>
                                            </t>
                                        </tr>

<!--                                        <t t-if="current_section and (line_last or-->
<!--                                        o.correction_invoice_line_ids[line_index+1].display_type == 'line_section')">-->

                                        <t t-if="line_last or
                                        o.correction_invoice_line_ids[line_index+1].display_type == 'line_section'">
                                            <tr class="is-subtotal text-right">
                                                <td colspan="99">
                                                    <strong class="mr16">Subtotal</strong>
                                                    <span t-esc="current_subtotal"
                                                          t-options="{'widget': 'monetary',
                                                          'display_currency': o.currency_id}"/>
                                                </td>
                                            </tr>
                                        </t>
                                    </t>
                                </tbody>
                            </table>

                            <div class="clearfix">
                                <div id="total" class="row">
                                    <div t-attf-class="#{'col-4' if report_type != 'html'
                                    else 'col-sm-7 col-md-5'} ml-auto">
                                        <table class="table table-sm" style="font-size: 12px">
                                            <tr class="border-black" style="border-bottom:1px solid #dddddd">
                                                <td>
                                                    <strong>Subtotal</strong>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="o.correction_untaxed"/>
                                                </td>
                                            </tr>
                                            <tr style="border-bottom:1px solid #dddddd">
                                                <td>
                                                    <strong>Taxes</strong>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="o.correction_tax"/>
                                                </td>
                                            </tr>
                                            <tr class="border-black">
                                                <td>
                                                    <strong>Total</strong>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="o.correction_total"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td t-if="o.correction_residual &gt; 0 or o.correction_residual == 0">
                                                    <strong>To Refund</strong>
                                                </td>
                                                <td t-if="o.correction_residual &lt; 0">
                                                    <strong>Amount Left to Pay</strong>
                                                </td>
                                                <td class="text-right">
                                                    <span t-esc="abs(o.correction_residual)"
                                                          t-options='{"widget": "monetary",
                                                          "display_currency": o.currency_id}'/>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <br/>
                        </t>

                        <p t-if="o.narration" name="narration">
                            <span class="col-xs-6" t-field="o.narration"/>
                        </p>
                        <!--                        <p t-if="o.invoice_payment_term_id" name="invoice_payment_term">-->
                        <!--                            <span class="col-xs-6" t-field="o.invoice_payment_term_id.note"/>-->
                        <!--                        </p>-->
                        <!--                        <p t-if="o.invoice_payment_term_id" name="invoice_payment_term">-->
                        <!--                            <span class="col-xs-6" t-field="o.invoice_payment_term_id.note"/>-->
                        <!--                        </p>-->

                           <p t-if="o.payment_method" name="payment_method">
                            Terms of payment:
                            <span class="col-xs-6" t-field="o.payment_method"/>
                               <span t-if="(o.payment_method != 'prepayment') and (o.days_to_payment > 0)">
                            within
                            <span class="col-xs-6" t-field="o.days_to_payment"/>
                            days.
                               </span>
                        </p>


                        <!--                        <p t-if="o.invoice_date_due" name="invoice_date_due">-->
                        <!--                            Date of payment:-->
                        <!--                            <span class="col-xs-6" t-field="o.invoice_date_due"/>-->
                        <!--                        </p>-->
                        <p t-if="o.fiscal_position_id.note" name="note">
                            <span class="col-xs-6" t-field="o.fiscal_position_id.note"/>
                        </p>
                        <div id="qrcode"
                             t-if="(o.partner_id.country_id.code in ['BE', 'AT', 'DE', 'FI', 'NL'])
                             and (o.company_id.qr_code) and (o.currency_id.name == 'EUR')
                             and (o.partner_bank_id.acc_number != False)">
                            <p t-if="(o.partner_bank_id.qr_code_valid)">
                                <strong class="text-center">Scan me with your banking app.</strong>
                                <br/>
                                <br/>
                                <img class="border border-dark rounded"
                                     t-att-src="o.partner_bank_id.build_qr_code_url(o.residual, (o.ref)
                                     if (o.ref) else o.name)"/>
                            </p>
                            <p t-if="(o.partner_bank_id.qr_code_valid == False)">
                                <strong class="text-center">The SEPA QR Code informations are not set correctly.
                                </strong>
                                <br/>
                            </p>
                        </div>
                    </div>
                </t>
            </t>
        </xpath>
    </template>
</odoo>
