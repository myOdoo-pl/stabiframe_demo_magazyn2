from collections import OrderedDict
import operator
# K_11 is a sum of EXU and WSU, K_12 is only value of WSU
TAXES_SALE = {
    'VZW': ['K_10'],
    'EXU': ['K_11'],
    # UDU -> WSU
    'WSU': ['K_11'],#K_12
    'V0' : ['K_13'],
    #K_14 podatek do art. 129
    'V5' : ['K_15', 'K_16'],
    'V7' : ['K_17', 'K_18'],
    'V8' : ['K_17', 'K_18'],
    'V22': ['K_19', 'K_20'],
    'VU22': ['K_19', 'K_20'],
    'V23': ['K_19', 'K_20'],
    'VU23': ['K_19', 'K_20'],
    'VWEW': ['K_19', 'K_20'],
    # UDT -> WDT
    'WDT': ['K_21'],
    'EXT': ['K_22'],
    'ST-WNT': ['K_23', 'K_24'],
    'ST-WNT-2': ['K_23', 'K_24'],
    'WNT': ['K_23', 'K_24'],
    'WNT2':['K_23', 'K_24'],
    'IMT': ['K_25', 'K_26'],
    'IMT2':['K_25', 'K_26'],
    'IMU': ['K_27', 'K_28'],
    'IMU2':['K_27', 'K_28'],
    'WNU': ['K_29', 'K_30'],
    'WNU2':['K_29', 'K_30'],
    'VOO': ['K_31'],
    # K_32, K_33
    'ZOO':['K_34', 'K_35'],
    'ZOO2':['K_34', 'K_35'],
    # K_36 - K_39
}

TAXES_PURCHASE = {
    # K_42, K_43
    'ZST23': ['K_43', 'K_44'],
    'ST-WNT': ['K_43', 'K_44'],
    'ST-WNT-1': ['K_43', 'K_44'],
    'Z23':  ['K_45', 'K_46'],
    # 'Z0':   ['K_45', 'K_46'],
    # 'ZZW':  ['K_45', 'K_46'],
    'ZLP':  ['K_45', 'K_46'],
    'ZLP-1':['K_45', 'K_46'],
    'IMU':  ['K_45', 'K_46'],
    'IMU1': ['K_45', 'K_46'],
    'ZOO':  ['K_45', 'K_46'],
    'ZOO1': ['K_45', 'K_46'],
    'IMT':  ['K_45', 'K_46'],
    'IMT1': ['K_45', 'K_46'],
    'WNT':  ['K_45', 'K_46'],
    'WNT1': ['K_45', 'K_46'],
    'Z22':  ['K_45', 'K_46'],
    'Z8':   ['K_45', 'K_46'],
    'Z7':   ['K_45', 'K_46'],
    'Z5':   ['K_45', 'K_46'],
    'Z3':   ['K_45', 'K_46'],
    'ZSAD': ['K_45', 'K_46'],
    'ZU23': ['K_45', 'K_46'],
    'ZU22': ['K_45', 'K_46'],
    'WNU':  ['K_45'],
    'WNU1': ['K_45', 'K_46'],
    'ZNST': [False, 'K_47'],
    'ZNPN': [False, 'K_48'],
    'ZN89b1': [False, 'K_49'],
    'ZN89b4': [False, 'K_50'],
}

TAXES_PURCHASE_VDEK_1 = {
    # K_42, K_43
    'ZST23': ['K_40', 'K_41'],
    'ST-WNT': ['K_40', 'K_41'],
    'ST-WNT-1': ['K_40', 'K_41'],
    'Z23':  ['K_42', 'K_43'],
    # 'Z0':   ['K_45', 'K_46'],
    # 'ZZW':  ['K_45', 'K_46'],
    'ZLP':  ['K_42', 'K_43'],
    'ZLP-1':['K_42', 'K_43'],
    'IMU':  ['K_42', 'K_43'],
    'IMU1': ['K_42', 'K_43'],
    'ZOO':  ['K_42', 'K_43'],
    'ZOO1': ['K_42', 'K_43'],
    'IMT':  ['K_42', 'K_43'],
    'IMT1': ['K_42', 'K_43'],
    'WNT':  ['K_42', 'K_43'],
    'WNT1': ['K_42', 'K_43'],
    'Z22':  ['K_42', 'K_43'],
    'Z8':   ['K_42', 'K_43'],
    'Z7':   ['K_42', 'K_43'],
    'Z5':   ['K_42', 'K_43'],
    'Z3':   ['K_42', 'K_43'],
    'ZSAD': ['K_42', 'K_43'],
    'ZU23': ['K_42', 'K_43'],
    'ZU22': ['K_42', 'K_43'],
    'WNU':  ['K_42'],
    'WNU1': ['K_42', 'K_43'],
    'ZNST': [False, 'K_44'],
    'ZNPN': [False, 'K_45'],
    'ZN89b1': [False, 'K_46'],
    'ZN89b4': [False, 'K_57'],
}


TAXES_UE = {
    'WDT': 'UE_C',
    'WNT': 'UE_D',
    'WSU': 'UE_E',
}

TAXES_INV_LINE = {
    'VZW': 'zw',
    'EXU': 'np',
    'WSU': 'np',#K_12
    'V0' : '0',
    'V5' : '5',
    'V7' : '7',
    'V8' : '8',
    'V22': '22',
    'VU22': '22',
    'V23': '23',
    'VU23': '23',
    'WDT': 'np',
    'EXT': 'np',
    'ST-WNT': '0',
    'ST-WNT-2': '0',
    'WNT': '0',
    'WNT2':'0',
    'IMT': '0',
    'IMT2':'0',
    'IMU': '0',
    'IMU2':'0',
    'WNU': '0',
    'WNU2':'0',
    'VOO': 'oo',
    'ZOO':'0',
    'ZOO2':'0',
    False: '0',
# ??????
    'Z8': '8',
    'Z23': '23',
    'ZLP': '23',
}

TAXES_UE_SALE = ['WDT', 'WSU']
REVERSE_CHARGE_TAXES = ['VOO', 'ZOO', 'ZOO1', 'ZOO2']

CELLS_DICT_VAT_7_18 = OrderedDict([
    ('P_10', 0),
    ('P_11', 0),
    ('P_12', 0),
    ('P_13', 0),
    ('P_14', 0),
    ('P_15', 0),
    ('P_16', 0),
    ('P_17', 0),
    ('P_18', 0),
    ('P_19', 0),
    ('P_20', 0),
    ('P_21', 0),
    ('P_22', 0),
    ('P_23', 0),
    ('P_24', 0),
    ('P_25', 0),
    ('P_26', 0),
    ('P_27', 0),
    ('P_28', 0),
    ('P_29', 0),
    ('P_30', 0),
    ('P_31', 0),
    ('P_32', 0),
    ('P_33', 0),
    ('P_34', 0),
    ('P_35', 0),
    ('P_36', 0),
    ('P_37', 0),
    ('P_38', 0),
    ('P_39', 0),
    ('P_40', {'plus': ['P_10', 'P_11', 'P_13', 'P_15', 'P_17', 'P_19', 'P_21', 'P_22', 'P_23', 'P_25', 'P_27', 'P_29', 'P_31', 'P_32', 'P_34']}),
    ('P_41', {'plus': ['P_16', 'P_18', 'P_20', 'P_24', 'P_26', 'P_28', 'P_30', 'P_33', 'P_35', 'P_36', 'P_37'],
              'minus':['P_38', 'P_39']}),
    ('P_42', 0), #'transition_amount'),
    ('P_43', 0),
    ('P_44', 0),
    ('P_45', 0),
    ('P_46', 0),
    ('P_47', 0),
    ('P_48', 0),
    ('P_49', 0),
    ('P_50', 0),
    ('P_51', {'plus': ['P_42', 'P_44', 'P_46', 'P_47', 'P_48', 'P_49', 'P_50']}),
    ('P_52', 0),
    ('P_53', 0),
    ('P_54', {'plus': ['P_41'], 'minus': ['P_51', 'P_52', 'P_53']}),
    ('P_55', 0),
    ('P_56', {'plus': ['P_51', 'P_55'], 'minus': ['P_44']}),
    ('P_57', 0),
    # ('P_69', 2),
    #('P_60', 0),
    #('P_61', 0),
    ('P_62', {'plus': ['P_56'], 'minus': ['P_57']})
])

CELLS_DICT = OrderedDict([
    ('P_10', 0),
    ('P_11', 0),
    ('P_12', 0),
    ('P_13', 0),
    ('P_14', 0),
    ('P_15', 0),
    ('P_16', 0),
    ('P_17', 0),
    ('P_18', 0),
    ('P_19', 0),
    ('P_20', 0),
    ('P_21', 0),
    ('P_22', 0),
    ('P_23', 0),
    ('P_24', 0),
    ('P_25', 0),
    ('P_26', 0),
    ('P_27', 0),
    ('P_28', 0),
    ('P_29', 0),
    ('P_30', 0),
    ('P_31', 0),
    ('P_32', 0),
    ('P_33', 0),
    ('P_34', 0),
    ('P_35', 0),
    ('P_36', 0),
    ('P_37', 0),
    ('P_38', 0),
    ('P_39', 0),
    ('P_40', {'plus': ['P_10', 'P_11', 'P_13', 'P_15', 'P_17', 'P_19', 'P_21', 'P_22', 'P_23', 'P_25', 'P_27', 'P_29', 'P_31', 'P_32', 'P_34']}),
    ('P_41', {'plus': ['P_16', 'P_18', 'P_20', 'P_24', 'P_26', 'P_28', 'P_30', 'P_33', 'P_35', 'P_36', 'P_37'],
              'minus':['P_38', 'P_39']}),
    ('P_42', 0), #'transition_amount'),
    ('P_43', 0),
    ('P_44', 0),
    ('P_45', 0),
    ('P_46', 0),
    ('P_47', 0),
    ('P_48', 0),
    ('P_49', 0),
    ('P_50', 0),
    ('P_51', {'plus': ['P_42', 'P_44', 'P_46', 'P_47', 'P_48', 'P_49', 'P_50']}),
    ('P_52', 0),
    ('P_53', 0),
    ('P_54', {'plus': ['P_41'], 'minus': ['P_51', 'P_52', 'P_53']}),
    ('P_55', 0),
    ('P_56', {'plus': ['P_51', 'P_55'], 'minus': ['P_44']}),
    ('P_57', 0),
    # ('P_58', 0),
    # ('P_59', 0),
    # ('P_60', 0),
    # ('P_61', {'plus': ['P_56'], 'minus': ['P_57']})
    ('P_62', {'plus': ['P_56'], 'minus': ['P_57']}),
])

CELLS_DICT_VDEK = OrderedDict([
    ('P_10', 0),
    ('P_11', 0),
    ('P_12', 0),
    ('P_13', 0),
    ('P_14', 0),
    ('P_15', 0),
    ('P_16', 0),
    ('P_17', 0),
    ('P_18', 0),
    ('P_19', 0),
    ('P_20', 0),
    ('P_21', 0),
    ('P_22', 0),
    ('P_23', 0),
    ('P_24', 0),
    ('P_25', 0),
    ('P_26', 0),
    ('P_27', 0),
    ('P_28', 0),
    ('P_29', 0),
    ('P_30', 0),
    ('P_31', 0),
    ('P_32', 0),
    ('P_33', 0),
    ('P_34', 0),
    ('P_35', 0),
    ('P_36', 0),
    ('P_37', {'plus': ['P_10','P_11', 'P_13', 'P_15', 'P_17', 'P_19', 'P_21', 'P_22', 'P_23', 'P_25', 'P_27', 'P_29','P_31']}),
    ('P_38', {'plus': ['P_16', 'P_18', 'P_20', 'P_24', 'P_26', 'P_28', 'P_30', 'P_32', 'P_33', 'P_34'],'minus': ['P_35', 'P_36']}),
    ('P_39', 0),
    ('P_40', 0),
    #('P_40', {'plus': ['P_10', 'P_11', 'P_13', 'P_15', 'P_17', 'P_19', 'P_21', 'P_22', 'P_23', 'P_25', 'P_27', 'P_29', 'P_31', 'P_32', 'P_34']}),
    #('P_41', {'plus': ['P_16', 'P_18', 'P_20', 'P_24', 'P_26', 'P_28', 'P_30', 'P_33', 'P_35', 'P_36', 'P_37'],
              #'minus':['P_38', 'P_39']}),
    ('P_41', 0),
    ('P_42', 0),
    ('P_43', 0),
    ('P_44', 0),
    ('P_45', 0),
    ('P_46', 0),
    ('P_47', 0),
    ('P_48', {'plus': ['P_39', 'P_41', 'P_43', 'P_44', 'P_45', 'P_46', 'P_47']}),
    ('P_49', 0),
    ('P_50', 0),
    #('P_51', {'plus': ['P_42', 'P_44', 'P_46', 'P_47', 'P_48', 'P_49', 'P_50']}),
    ('P_51', 0),
    ('P_52', 0),
    ('P_53', 0),
    # ('P_54', jeżeli jest nadwyżka podatku (p_53) to wpisujemy tu ta wartosc , tu ma byc boolean
    # ('P_55', 0),
    # ('P_56', 0),
    # ('P_57', 0),
    # ('P_58', 0),
    # ('P_59', 0), <- to ma trigerowac p_61
    # ('P_60', czy chcemy zwrot czy nei chcemy zwrotu. Jak chcemy to wpisujemy kwote z pola p_53 do p_54 a jak nie chcemy to tutaj.),
    # ('P_61', {'plus': ['P_56'], 'minus': ['P_57']})
    # ('P_62', {'plus': ['P_56'], 'minus': ['P_57']}),
])

OPERATOR_MAP = {
    'plus': operator.add,
    'minus': operator.sub,
}
